                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ANSI-C Compiler
                                      3 ; Version 4.0.0 #11528 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module nixie
                                      6 	.optsdcc -mstm8
                                      7 	
                                      8 ;--------------------------------------------------------
                                      9 ; Public variables in this module
                                     10 ;--------------------------------------------------------
                                     11 	.globl _delay
                                     12 	.globl _strchr
                                     13 	.globl _SPI_GetFlagStatus
                                     14 	.globl _SPI_SendData
                                     15 	.globl _SPI_Cmd
                                     16 	.globl _SPI_Init
                                     17 	.globl _SPI_DeInit
                                     18 	.globl _GPIO_WriteLow
                                     19 	.globl _GPIO_WriteHigh
                                     20 	.globl _GPIO_Init
                                     21 	.globl _tube_state
                                     22 	.globl _NIXIE_Init
                                     23 	.globl _NIXIE_DisplayChar
                                     24 	.globl _NIXIE_DisplayTime
                                     25 ;--------------------------------------------------------
                                     26 ; ram data
                                     27 ;--------------------------------------------------------
                                     28 	.area DATA
                                     29 ;--------------------------------------------------------
                                     30 ; ram data
                                     31 ;--------------------------------------------------------
                                     32 	.area INITIALIZED
      000000                         33 _tube_state::
      000000                         34 	.ds 1
                                     35 ;--------------------------------------------------------
                                     36 ; absolute external ram data
                                     37 ;--------------------------------------------------------
                                     38 	.area DABS (ABS)
                                     39 
                                     40 ; default segment ordering for linker
                                     41 	.area HOME
                                     42 	.area GSINIT
                                     43 	.area GSFINAL
                                     44 	.area CONST
                                     45 	.area INITIALIZER
                                     46 	.area CODE
                                     47 
                                     48 ;--------------------------------------------------------
                                     49 ; global & static initialisations
                                     50 ;--------------------------------------------------------
                                     51 	.area HOME
                                     52 	.area GSINIT
                                     53 	.area GSFINAL
                                     54 	.area GSINIT
                                     55 ;--------------------------------------------------------
                                     56 ; Home
                                     57 ;--------------------------------------------------------
                                     58 	.area HOME
                                     59 	.area HOME
                                     60 ;--------------------------------------------------------
                                     61 ; code
                                     62 ;--------------------------------------------------------
                                     63 	.area CODE
                                     64 ;	Source/Device/Src/nixie.c: 51: void delay(void)
                                     65 ;	-----------------------------------------
                                     66 ;	 function delay
                                     67 ;	-----------------------------------------
      000000                         68 _delay:
                                     69 ;	Source/Device/Src/nixie.c: 60: for (int i = 0; i < 300; i++);//这个比较合适
      000000 5F               [ 1]   70 	clrw	x
      000001                         71 00103$:
      000001 A3 01 2C         [ 2]   72 	cpw	x, #0x012c
      000004 2F 01            [ 1]   73 	jrslt	00118$
      000006 81               [ 4]   74 	ret
      000007                         75 00118$:
      000007 5C               [ 1]   76 	incw	x
      000008 20 F7            [ 2]   77 	jra	00103$
                                     78 ;	Source/Device/Src/nixie.c: 61: }
      00000A 81               [ 4]   79 	ret
                                     80 ;	Source/Device/Src/nixie.c: 66: void NIXIE_Init(void)
                                     81 ;	-----------------------------------------
                                     82 ;	 function NIXIE_Init
                                     83 ;	-----------------------------------------
      00000B                         84 _NIXIE_Init:
                                     85 ;	Source/Device/Src/nixie.c: 68: GPIO_Init(GPIOC,GPIO_PIN_5,GPIO_MODE_OUT_PP_LOW_FAST);//PC5 SHCP 复用功能
      00000B 4B E0            [ 1]   86 	push	#0xe0
      00000D 4B 20            [ 1]   87 	push	#0x20
      00000F 4B 0A            [ 1]   88 	push	#0x0a
      000011 4B 50            [ 1]   89 	push	#0x50
      000013 CDr00r00         [ 4]   90 	call	_GPIO_Init
      000016 5B 04            [ 2]   91 	addw	sp, #4
                                     92 ;	Source/Device/Src/nixie.c: 69: GPIO_Init(GPIOC,GPIO_PIN_6,GPIO_MODE_OUT_PP_LOW_FAST);//PC6 DATA 复用功能
      000018 4B E0            [ 1]   93 	push	#0xe0
      00001A 4B 40            [ 1]   94 	push	#0x40
      00001C 4B 0A            [ 1]   95 	push	#0x0a
      00001E 4B 50            [ 1]   96 	push	#0x50
      000020 CDr00r00         [ 4]   97 	call	_GPIO_Init
      000023 5B 04            [ 2]   98 	addw	sp, #4
                                     99 ;	Source/Device/Src/nixie.c: 70: GPIO_Init(GPIOC,GPIO_PIN_7,GPIO_MODE_OUT_PP_LOW_FAST);//PC7 STCP 普通IO口
      000025 4B E0            [ 1]  100 	push	#0xe0
      000027 4B 80            [ 1]  101 	push	#0x80
      000029 4B 0A            [ 1]  102 	push	#0x0a
      00002B 4B 50            [ 1]  103 	push	#0x50
      00002D CDr00r00         [ 4]  104 	call	_GPIO_Init
      000030 5B 04            [ 2]  105 	addw	sp, #4
                                    106 ;	Source/Device/Src/nixie.c: 71: SPI_DeInit();
      000032 CDr00r00         [ 4]  107 	call	_SPI_DeInit
                                    108 ;	Source/Device/Src/nixie.c: 73: SPI_Init(SPI_FIRSTBIT_LSB,
      000035 4B 07            [ 1]  109 	push	#0x07
      000037 4B 02            [ 1]  110 	push	#0x02
      000039 4B C0            [ 1]  111 	push	#0xc0
      00003B 4B 00            [ 1]  112 	push	#0x00
      00003D 4B 00            [ 1]  113 	push	#0x00
      00003F 4B 04            [ 1]  114 	push	#0x04
      000041 4B 00            [ 1]  115 	push	#0x00
      000043 4B 80            [ 1]  116 	push	#0x80
      000045 CDr00r00         [ 4]  117 	call	_SPI_Init
      000048 5B 08            [ 2]  118 	addw	sp, #8
                                    119 ;	Source/Device/Src/nixie.c: 81: SPI_Cmd(ENABLE);
      00004A 4B 01            [ 1]  120 	push	#0x01
      00004C CDr00r00         [ 4]  121 	call	_SPI_Cmd
      00004F 84               [ 1]  122 	pop	a
                                    123 ;	Source/Device/Src/nixie.c: 82: }
      000050 81               [ 4]  124 	ret
                                    125 ;	Source/Device/Src/nixie.c: 92: uint16_t NIXIE_DisplayChar(uint8_t tubeNum,char* character,FunctionalState tubeState)
                                    126 ;	-----------------------------------------
                                    127 ;	 function NIXIE_DisplayChar
                                    128 ;	-----------------------------------------
      000051                        129 _NIXIE_DisplayChar:
      000051 52 05            [ 2]  130 	sub	sp, #5
                                    131 ;	Source/Device/Src/nixie.c: 94: uint16_t tmp=0;
      000053 5F               [ 1]  132 	clrw	x
      000054 1F 03            [ 2]  133 	ldw	(0x03, sp), x
                                    134 ;	Source/Device/Src/nixie.c: 97: if(strchr(character,'.')!=NULL)
      000056 4B 2E            [ 1]  135 	push	#0x2e
      000058 4B 00            [ 1]  136 	push	#0x00
      00005A 1E 0B            [ 2]  137 	ldw	x, (0x0b, sp)
      00005C 89               [ 2]  138 	pushw	x
      00005D CDr00r00         [ 4]  139 	call	_strchr
      000060 5B 04            [ 2]  140 	addw	sp, #4
      000062 5D               [ 2]  141 	tnzw	x
      000063 27 05            [ 1]  142 	jreq	00118$
                                    143 ;	Source/Device/Src/nixie.c: 98: tmp|=1<<11;
      000065 AE 08 00         [ 2]  144 	ldw	x, #0x0800
      000068 1F 03            [ 2]  145 	ldw	(0x03, sp), x
                                    146 ;	Source/Device/Src/nixie.c: 99: for(uint8_t i=0;i<9;++i)
      00006A                        147 00118$:
      00006A 0F 05            [ 1]  148 	clr	(0x05, sp)
      00006C                        149 00111$:
      00006C 7B 05            [ 1]  150 	ld	a, (0x05, sp)
      00006E A1 09            [ 1]  151 	cp	a, #0x09
      000070 24 2E            [ 1]  152 	jrnc	00105$
                                    153 ;	Source/Device/Src/nixie.c: 101: if(strchr(character,'1'+i)!=NULL)
      000072 7B 05            [ 1]  154 	ld	a, (0x05, sp)
      000074 5F               [ 1]  155 	clrw	x
      000075 97               [ 1]  156 	ld	xl, a
      000076 1C 00 31         [ 2]  157 	addw	x, #0x0031
      000079 89               [ 2]  158 	pushw	x
      00007A 1E 0B            [ 2]  159 	ldw	x, (0x0b, sp)
      00007C 89               [ 2]  160 	pushw	x
      00007D CDr00r00         [ 4]  161 	call	_strchr
      000080 5B 04            [ 2]  162 	addw	sp, #4
      000082 1F 01            [ 2]  163 	ldw	(0x01, sp), x
      000084 27 16            [ 1]  164 	jreq	00112$
                                    165 ;	Source/Device/Src/nixie.c: 102: tmp|=1<<10-i;
      000086 A6 0A            [ 1]  166 	ld	a, #0x0a
      000088 10 05            [ 1]  167 	sub	a, (0x05, sp)
      00008A 5F               [ 1]  168 	clrw	x
      00008B 5C               [ 1]  169 	incw	x
      00008C 4D               [ 1]  170 	tnz	a
      00008D 27 04            [ 1]  171 	jreq	00150$
      00008F                        172 00149$:
      00008F 58               [ 2]  173 	sllw	x
      000090 4A               [ 1]  174 	dec	a
      000091 26 FC            [ 1]  175 	jrne	00149$
      000093                        176 00150$:
      000093 9F               [ 1]  177 	ld	a, xl
      000094 1A 04            [ 1]  178 	or	a, (0x04, sp)
      000096 02               [ 1]  179 	rlwa	x
      000097 1A 03            [ 1]  180 	or	a, (0x03, sp)
      000099 95               [ 1]  181 	ld	xh, a
      00009A 1F 03            [ 2]  182 	ldw	(0x03, sp), x
      00009C                        183 00112$:
                                    184 ;	Source/Device/Src/nixie.c: 99: for(uint8_t i=0;i<9;++i)
      00009C 0C 05            [ 1]  185 	inc	(0x05, sp)
      00009E 20 CC            [ 2]  186 	jra	00111$
      0000A0                        187 00105$:
                                    188 ;	Source/Device/Src/nixie.c: 104: if(strchr(character,'0')!=NULL)
      0000A0 4B 30            [ 1]  189 	push	#0x30
      0000A2 4B 00            [ 1]  190 	push	#0x00
      0000A4 1E 0B            [ 2]  191 	ldw	x, (0x0b, sp)
      0000A6 89               [ 2]  192 	pushw	x
      0000A7 CDr00r00         [ 4]  193 	call	_strchr
      0000AA 5B 04            [ 2]  194 	addw	sp, #4
      0000AC 5D               [ 2]  195 	tnzw	x
      0000AD 27 0A            [ 1]  196 	jreq	00107$
                                    197 ;	Source/Device/Src/nixie.c: 105: tmp|=1<<1;
      0000AF 7B 04            [ 1]  198 	ld	a, (0x04, sp)
      0000B1 AA 02            [ 1]  199 	or	a, #0x02
      0000B3 97               [ 1]  200 	ld	xl, a
      0000B4 7B 03            [ 1]  201 	ld	a, (0x03, sp)
      0000B6 95               [ 1]  202 	ld	xh, a
      0000B7 1F 03            [ 2]  203 	ldw	(0x03, sp), x
      0000B9                        204 00107$:
                                    205 ;	Source/Device/Src/nixie.c: 106: if(tubeState==ENABLE)
      0000B9 7B 0B            [ 1]  206 	ld	a, (0x0b, sp)
      0000BB 4A               [ 1]  207 	dec	a
      0000BC 26 07            [ 1]  208 	jrne	00109$
                                    209 ;	Source/Device/Src/nixie.c: 107: tmp|=1<<0;
      0000BE 1E 03            [ 2]  210 	ldw	x, (0x03, sp)
      0000C0 54               [ 2]  211 	srlw	x
      0000C1 99               [ 1]  212 	scf
      0000C2 59               [ 2]  213 	rlcw	x
      0000C3 1F 03            [ 2]  214 	ldw	(0x03, sp), x
      0000C5                        215 00109$:
                                    216 ;	Source/Device/Src/nixie.c: 109: output=(tmp&0xAAA)>>1;
      0000C5 1E 03            [ 2]  217 	ldw	x, (0x03, sp)
      0000C7 9F               [ 1]  218 	ld	a, xl
      0000C8 A4 AA            [ 1]  219 	and	a, #0xaa
      0000CA 90 97            [ 1]  220 	ld	yl, a
      0000CC 9E               [ 1]  221 	ld	a, xh
      0000CD A4 0A            [ 1]  222 	and	a, #0x0a
      0000CF 90 95            [ 1]  223 	ld	yh, a
      0000D1 90 54            [ 2]  224 	srlw	y
                                    225 ;	Source/Device/Src/nixie.c: 110: output|=(tmp&0x555)<<1;
      0000D3 9F               [ 1]  226 	ld	a, xl
      0000D4 A4 55            [ 1]  227 	and	a, #0x55
      0000D6 02               [ 1]  228 	rlwa	x
      0000D7 A4 05            [ 1]  229 	and	a, #0x05
      0000D9 95               [ 1]  230 	ld	xh, a
      0000DA 58               [ 2]  231 	sllw	x
      0000DB 17 04            [ 2]  232 	ldw	(0x04, sp), y
      0000DD 9F               [ 1]  233 	ld	a, xl
      0000DE 1A 05            [ 1]  234 	or	a, (0x05, sp)
      0000E0 02               [ 1]  235 	rlwa	x
      0000E1 1A 04            [ 1]  236 	or	a, (0x04, sp)
                                    237 ;	Source/Device/Src/nixie.c: 112: return output;
      0000E3 95               [ 1]  238 	ld	xh, a
                                    239 ;	Source/Device/Src/nixie.c: 113: }
      0000E4 5B 05            [ 2]  240 	addw	sp, #5
      0000E6 81               [ 4]  241 	ret
                                    242 ;	Source/Device/Src/nixie.c: 121: void NIXIE_DisplayTime(uint8_t hour,uint8_t min)
                                    243 ;	-----------------------------------------
                                    244 ;	 function NIXIE_DisplayTime
                                    245 ;	-----------------------------------------
      0000E7                        246 _NIXIE_DisplayTime:
      0000E7 52 12            [ 2]  247 	sub	sp, #18
                                    248 ;	Source/Device/Src/nixie.c: 125: char tube1s[]="0",tube2s[]="0",tube3s[]="0.",tube4s[]="0";
      0000E9 A6 30            [ 1]  249 	ld	a, #0x30
      0000EB 6B 01            [ 1]  250 	ld	(0x01, sp), a
      0000ED 96               [ 1]  251 	ldw	x, sp
      0000EE 6F 02            [ 1]  252 	clr	(2, x)
      0000F0 A6 30            [ 1]  253 	ld	a, #0x30
      0000F2 6B 03            [ 1]  254 	ld	(0x03, sp), a
      0000F4 96               [ 1]  255 	ldw	x, sp
      0000F5 6F 04            [ 1]  256 	clr	(4, x)
      0000F7 A6 30            [ 1]  257 	ld	a, #0x30
      0000F9 6B 05            [ 1]  258 	ld	(0x05, sp), a
      0000FB 96               [ 1]  259 	ldw	x, sp
      0000FC A6 2E            [ 1]  260 	ld	a, #0x2e
      0000FE E7 06            [ 1]  261 	ld	(6, x), a
      000100 96               [ 1]  262 	ldw	x, sp
      000101 6F 07            [ 1]  263 	clr	(7, x)
      000103 A6 30            [ 1]  264 	ld	a, #0x30
      000105 6B 08            [ 1]  265 	ld	(0x08, sp), a
      000107 96               [ 1]  266 	ldw	x, sp
      000108 6F 09            [ 1]  267 	clr	(9, x)
                                    268 ;	Source/Device/Src/nixie.c: 127: uint8_t tmp=hour/10;
      00010A 7B 15            [ 1]  269 	ld	a, (0x15, sp)
      00010C 6B 12            [ 1]  270 	ld	(0x12, sp), a
      00010E 0F 11            [ 1]  271 	clr	(0x11, sp)
      000110 4B 0A            [ 1]  272 	push	#0x0a
      000112 4B 00            [ 1]  273 	push	#0x00
      000114 1E 13            [ 2]  274 	ldw	x, (0x13, sp)
      000116 89               [ 2]  275 	pushw	x
      000117 CDr00r00         [ 4]  276 	call	__divsint
      00011A 5B 04            [ 2]  277 	addw	sp, #4
                                    278 ;	Source/Device/Src/nixie.c: 128: tube1s[0]+=tmp;
      00011C 7B 01            [ 1]  279 	ld	a, (0x01, sp)
      00011E 89               [ 2]  280 	pushw	x
      00011F 1B 02            [ 1]  281 	add	a, (2, sp)
      000121 85               [ 2]  282 	popw	x
      000122 6B 01            [ 1]  283 	ld	(0x01, sp), a
                                    284 ;	Source/Device/Src/nixie.c: 130: tmp=hour%10;
      000124 4B 0A            [ 1]  285 	push	#0x0a
      000126 4B 00            [ 1]  286 	push	#0x00
      000128 1E 13            [ 2]  287 	ldw	x, (0x13, sp)
      00012A 89               [ 2]  288 	pushw	x
      00012B CDr00r00         [ 4]  289 	call	__modsint
      00012E 5B 04            [ 2]  290 	addw	sp, #4
                                    291 ;	Source/Device/Src/nixie.c: 131: tube2s[0]+=tmp;
      000130 7B 03            [ 1]  292 	ld	a, (0x03, sp)
      000132 89               [ 2]  293 	pushw	x
      000133 1B 02            [ 1]  294 	add	a, (2, sp)
      000135 85               [ 2]  295 	popw	x
      000136 6B 03            [ 1]  296 	ld	(0x03, sp), a
                                    297 ;	Source/Device/Src/nixie.c: 133: tmp=min/10;
      000138 7B 16            [ 1]  298 	ld	a, (0x16, sp)
      00013A 6B 12            [ 1]  299 	ld	(0x12, sp), a
      00013C 0F 11            [ 1]  300 	clr	(0x11, sp)
      00013E 4B 0A            [ 1]  301 	push	#0x0a
      000140 4B 00            [ 1]  302 	push	#0x00
      000142 1E 13            [ 2]  303 	ldw	x, (0x13, sp)
      000144 89               [ 2]  304 	pushw	x
      000145 CDr00r00         [ 4]  305 	call	__divsint
      000148 5B 04            [ 2]  306 	addw	sp, #4
                                    307 ;	Source/Device/Src/nixie.c: 134: tube3s[0]+=tmp;
      00014A 7B 05            [ 1]  308 	ld	a, (0x05, sp)
      00014C 89               [ 2]  309 	pushw	x
      00014D 1B 02            [ 1]  310 	add	a, (2, sp)
      00014F 85               [ 2]  311 	popw	x
      000150 6B 05            [ 1]  312 	ld	(0x05, sp), a
                                    313 ;	Source/Device/Src/nixie.c: 136: tmp=min%10;
      000152 4B 0A            [ 1]  314 	push	#0x0a
      000154 4B 00            [ 1]  315 	push	#0x00
      000156 1E 13            [ 2]  316 	ldw	x, (0x13, sp)
      000158 89               [ 2]  317 	pushw	x
      000159 CDr00r00         [ 4]  318 	call	__modsint
      00015C 5B 04            [ 2]  319 	addw	sp, #4
                                    320 ;	Source/Device/Src/nixie.c: 137: tube4s[0]+=tmp;
      00015E 7B 08            [ 1]  321 	ld	a, (0x08, sp)
      000160 89               [ 2]  322 	pushw	x
      000161 1B 02            [ 1]  323 	add	a, (2, sp)
      000163 85               [ 2]  324 	popw	x
      000164 6B 08            [ 1]  325 	ld	(0x08, sp), a
                                    326 ;	Source/Device/Src/nixie.c: 139: tube1=NIXIE_DisplayChar(1,tube1s,tube_state);
      000166 3Bu00u00         [ 1]  327 	push	_tube_state+0
      000169 96               [ 1]  328 	ldw	x, sp
      00016A 5C               [ 1]  329 	incw	x
      00016B 5C               [ 1]  330 	incw	x
      00016C 89               [ 2]  331 	pushw	x
      00016D 4B 01            [ 1]  332 	push	#0x01
      00016F CDr00r51         [ 4]  333 	call	_NIXIE_DisplayChar
      000172 5B 04            [ 2]  334 	addw	sp, #4
      000174 1F 0A            [ 2]  335 	ldw	(0x0a, sp), x
                                    336 ;	Source/Device/Src/nixie.c: 140: tube2=NIXIE_DisplayChar(2,tube2s,tube_state);
      000176 3Bu00u00         [ 1]  337 	push	_tube_state+0
      000179 96               [ 1]  338 	ldw	x, sp
      00017A 1C 00 04         [ 2]  339 	addw	x, #4
      00017D 89               [ 2]  340 	pushw	x
      00017E 4B 02            [ 1]  341 	push	#0x02
      000180 CDr00r51         [ 4]  342 	call	_NIXIE_DisplayChar
      000183 5B 04            [ 2]  343 	addw	sp, #4
      000185 1F 0C            [ 2]  344 	ldw	(0x0c, sp), x
                                    345 ;	Source/Device/Src/nixie.c: 141: tube3=NIXIE_DisplayChar(3,tube3s,tube_state);
      000187 3Bu00u00         [ 1]  346 	push	_tube_state+0
      00018A 96               [ 1]  347 	ldw	x, sp
      00018B 1C 00 06         [ 2]  348 	addw	x, #6
      00018E 89               [ 2]  349 	pushw	x
      00018F 4B 03            [ 1]  350 	push	#0x03
      000191 CDr00r51         [ 4]  351 	call	_NIXIE_DisplayChar
      000194 5B 04            [ 2]  352 	addw	sp, #4
      000196 1F 0E            [ 2]  353 	ldw	(0x0e, sp), x
                                    354 ;	Source/Device/Src/nixie.c: 142: tube4=NIXIE_DisplayChar(4,tube4s,tube_state);
      000198 3Bu00u00         [ 1]  355 	push	_tube_state+0
      00019B 96               [ 1]  356 	ldw	x, sp
      00019C 1C 00 09         [ 2]  357 	addw	x, #9
      00019F 89               [ 2]  358 	pushw	x
      0001A0 4B 04            [ 1]  359 	push	#0x04
      0001A2 CDr00r51         [ 4]  360 	call	_NIXIE_DisplayChar
      0001A5 5B 04            [ 2]  361 	addw	sp, #4
      0001A7 1F 10            [ 2]  362 	ldw	(0x10, sp), x
                                    363 ;	Source/Device/Src/nixie.c: 146: GPIO_WriteLow(GPIOC,GPIO_PIN_7);//595的输出线拉低
      0001A9 4B 80            [ 1]  364 	push	#0x80
      0001AB 4B 0A            [ 1]  365 	push	#0x0a
      0001AD 4B 50            [ 1]  366 	push	#0x50
      0001AF CDr00r00         [ 4]  367 	call	_GPIO_WriteLow
      0001B2 5B 03            [ 2]  368 	addw	sp, #3
                                    369 ;	Source/Device/Src/nixie.c: 151: tmp1=(uint8_t)((tube4&0b11111110)>>1);
      0001B4 1E 10            [ 2]  370 	ldw	x, (0x10, sp)
      0001B6 54               [ 2]  371 	srlw	x
      0001B7 58               [ 2]  372 	sllw	x
      0001B8 4F               [ 1]  373 	clr	a
      0001B9 95               [ 1]  374 	ld	xh, a
      0001BA 54               [ 2]  375 	srlw	x
                                    376 ;	Source/Device/Src/nixie.c: 152: tmp2=(uint8_t)((tube4&0b00000001)<<7);
      0001BB 7B 11            [ 1]  377 	ld	a, (0x11, sp)
      0001BD A4 01            [ 1]  378 	and	a, #0x01
      0001BF 4E               [ 1]  379 	swap	a
      0001C0 A4 F0            [ 1]  380 	and	a, #0xf0
      0001C2 48               [ 1]  381 	sll	a
      0001C3 48               [ 1]  382 	sll	a
      0001C4 48               [ 1]  383 	sll	a
                                    384 ;	Source/Device/Src/nixie.c: 153: tmp1=tmp1|tmp2;
      0001C5 89               [ 2]  385 	pushw	x
      0001C6 1A 02            [ 1]  386 	or	a, (2, sp)
      0001C8 85               [ 2]  387 	popw	x
                                    388 ;	Source/Device/Src/nixie.c: 154: SPI_SendData(tmp1);
      0001C9 88               [ 1]  389 	push	a
      0001CA CDr00r00         [ 4]  390 	call	_SPI_SendData
      0001CD 84               [ 1]  391 	pop	a
                                    392 ;	Source/Device/Src/nixie.c: 156: while(SPI_GetFlagStatus(SPI_FLAG_TXE)==RESET);
      0001CE                        393 00101$:
      0001CE 4B 02            [ 1]  394 	push	#0x02
      0001D0 CDr00r00         [ 4]  395 	call	_SPI_GetFlagStatus
      0001D3 5B 01            [ 2]  396 	addw	sp, #1
      0001D5 4D               [ 1]  397 	tnz	a
      0001D6 27 F6            [ 1]  398 	jreq	00101$
                                    399 ;	Source/Device/Src/nixie.c: 158: tmp1=(uint8_t)((tube3&0b1111)<<4);
      0001D8 7B 0F            [ 1]  400 	ld	a, (0x0f, sp)
      0001DA A4 0F            [ 1]  401 	and	a, #0x0f
      0001DC 4E               [ 1]  402 	swap	a
      0001DD A4 F0            [ 1]  403 	and	a, #0xf0
      0001DF 6B 12            [ 1]  404 	ld	(0x12, sp), a
                                    405 ;	Source/Device/Src/nixie.c: 159: tmp2=(uint8_t)(tube4>>8);
      0001E1 7B 10            [ 1]  406 	ld	a, (0x10, sp)
      0001E3 5F               [ 1]  407 	clrw	x
                                    408 ;	Source/Device/Src/nixie.c: 160: tmp1=tmp1|tmp2;
      0001E4 1A 12            [ 1]  409 	or	a, (0x12, sp)
                                    410 ;	Source/Device/Src/nixie.c: 161: tmp2=(tmp1&0b00000001)<<7;
      0001E6 97               [ 1]  411 	ld	xl, a
      0001E7 A4 01            [ 1]  412 	and	a, #0x01
      0001E9 4E               [ 1]  413 	swap	a
      0001EA A4 F0            [ 1]  414 	and	a, #0xf0
      0001EC 48               [ 1]  415 	sll	a
      0001ED 48               [ 1]  416 	sll	a
      0001EE 48               [ 1]  417 	sll	a
      0001EF 6B 12            [ 1]  418 	ld	(0x12, sp), a
                                    419 ;	Source/Device/Src/nixie.c: 162: tmp1=(tmp1>>1)|tmp2;
      0001F1 9F               [ 1]  420 	ld	a, xl
      0001F2 44               [ 1]  421 	srl	a
      0001F3 1A 12            [ 1]  422 	or	a, (0x12, sp)
                                    423 ;	Source/Device/Src/nixie.c: 163: SPI_SendData(tmp1);
      0001F5 88               [ 1]  424 	push	a
      0001F6 CDr00r00         [ 4]  425 	call	_SPI_SendData
      0001F9 84               [ 1]  426 	pop	a
                                    427 ;	Source/Device/Src/nixie.c: 165: while(SPI_GetFlagStatus(SPI_FLAG_TXE)==RESET);
      0001FA                        428 00104$:
      0001FA 4B 02            [ 1]  429 	push	#0x02
      0001FC CDr00r00         [ 4]  430 	call	_SPI_GetFlagStatus
      0001FF 5B 01            [ 2]  431 	addw	sp, #1
      000201 4D               [ 1]  432 	tnz	a
      000202 27 F6            [ 1]  433 	jreq	00104$
                                    434 ;	Source/Device/Src/nixie.c: 167: tmp1=(uint8_t)(tube3>>5);
      000204 1E 0E            [ 2]  435 	ldw	x, (0x0e, sp)
      000206 A6 20            [ 1]  436 	ld	a, #0x20
      000208 62               [ 2]  437 	div	x, a
      000209 41               [ 1]  438 	exg	a, xl
      00020A 6B 12            [ 1]  439 	ld	(0x12, sp), a
      00020C 41               [ 1]  440 	exg	a, xl
                                    441 ;	Source/Device/Src/nixie.c: 168: tmp2=(uint8_t)(((tube3&0b10000)>>4)<<7);
      00020D 16 0E            [ 2]  442 	ldw	y, (0x0e, sp)
      00020F 5F               [ 1]  443 	clrw	x
      000210 90 9F            [ 1]  444 	ld	a, yl
      000212 A4 10            [ 1]  445 	and	a, #0x10
      000214 97               [ 1]  446 	ld	xl, a
      000215 A6 10            [ 1]  447 	ld	a, #0x10
      000217 62               [ 2]  448 	div	x, a
      000218 9F               [ 1]  449 	ld	a, xl
      000219 4E               [ 1]  450 	swap	a
      00021A A4 F0            [ 1]  451 	and	a, #0xf0
      00021C 48               [ 1]  452 	sll	a
      00021D 48               [ 1]  453 	sll	a
      00021E 48               [ 1]  454 	sll	a
                                    455 ;	Source/Device/Src/nixie.c: 169: tmp1=tmp1|tmp2;
      00021F 1A 12            [ 1]  456 	or	a, (0x12, sp)
                                    457 ;	Source/Device/Src/nixie.c: 170: SPI_SendData(tmp1);
      000221 88               [ 1]  458 	push	a
      000222 CDr00r00         [ 4]  459 	call	_SPI_SendData
      000225 84               [ 1]  460 	pop	a
                                    461 ;	Source/Device/Src/nixie.c: 172: while(SPI_GetFlagStatus(SPI_FLAG_TXE)==RESET);
      000226                        462 00107$:
      000226 4B 02            [ 1]  463 	push	#0x02
      000228 CDr00r00         [ 4]  464 	call	_SPI_GetFlagStatus
      00022B 5B 01            [ 2]  465 	addw	sp, #1
      00022D 4D               [ 1]  466 	tnz	a
      00022E 27 F6            [ 1]  467 	jreq	00107$
                                    468 ;	Source/Device/Src/nixie.c: 175: tmp1=(uint8_t)((tube2&0b11111110)>>1);
      000230 1E 0C            [ 2]  469 	ldw	x, (0x0c, sp)
      000232 54               [ 2]  470 	srlw	x
      000233 58               [ 2]  471 	sllw	x
      000234 4F               [ 1]  472 	clr	a
      000235 95               [ 1]  473 	ld	xh, a
      000236 54               [ 2]  474 	srlw	x
                                    475 ;	Source/Device/Src/nixie.c: 176: tmp2=(uint8_t)((tube2&0b00000001)<<7);
      000237 7B 0D            [ 1]  476 	ld	a, (0x0d, sp)
      000239 A4 01            [ 1]  477 	and	a, #0x01
      00023B 4E               [ 1]  478 	swap	a
      00023C A4 F0            [ 1]  479 	and	a, #0xf0
      00023E 48               [ 1]  480 	sll	a
      00023F 48               [ 1]  481 	sll	a
      000240 48               [ 1]  482 	sll	a
                                    483 ;	Source/Device/Src/nixie.c: 177: tmp1=tmp1|tmp2;
      000241 89               [ 2]  484 	pushw	x
      000242 1A 02            [ 1]  485 	or	a, (2, sp)
      000244 85               [ 2]  486 	popw	x
                                    487 ;	Source/Device/Src/nixie.c: 178: SPI_SendData(tmp1);
      000245 88               [ 1]  488 	push	a
      000246 CDr00r00         [ 4]  489 	call	_SPI_SendData
      000249 84               [ 1]  490 	pop	a
                                    491 ;	Source/Device/Src/nixie.c: 180: while(SPI_GetFlagStatus(SPI_FLAG_TXE)==RESET);
      00024A                        492 00110$:
      00024A 4B 02            [ 1]  493 	push	#0x02
      00024C CDr00r00         [ 4]  494 	call	_SPI_GetFlagStatus
      00024F 5B 01            [ 2]  495 	addw	sp, #1
      000251 4D               [ 1]  496 	tnz	a
      000252 27 F6            [ 1]  497 	jreq	00110$
                                    498 ;	Source/Device/Src/nixie.c: 182: tmp1=(uint8_t)((tube1&0b1111)<<4);
      000254 7B 0B            [ 1]  499 	ld	a, (0x0b, sp)
      000256 A4 0F            [ 1]  500 	and	a, #0x0f
      000258 4E               [ 1]  501 	swap	a
      000259 A4 F0            [ 1]  502 	and	a, #0xf0
      00025B 6B 12            [ 1]  503 	ld	(0x12, sp), a
                                    504 ;	Source/Device/Src/nixie.c: 183: tmp2=(uint8_t)(tube2>>8);
      00025D 7B 0C            [ 1]  505 	ld	a, (0x0c, sp)
      00025F 5F               [ 1]  506 	clrw	x
                                    507 ;	Source/Device/Src/nixie.c: 184: tmp1=tmp1|tmp2;
      000260 1A 12            [ 1]  508 	or	a, (0x12, sp)
                                    509 ;	Source/Device/Src/nixie.c: 185: tmp2=(tmp1&0b00000001)<<7;
      000262 97               [ 1]  510 	ld	xl, a
      000263 A4 01            [ 1]  511 	and	a, #0x01
      000265 4E               [ 1]  512 	swap	a
      000266 A4 F0            [ 1]  513 	and	a, #0xf0
      000268 48               [ 1]  514 	sll	a
      000269 48               [ 1]  515 	sll	a
      00026A 48               [ 1]  516 	sll	a
      00026B 6B 12            [ 1]  517 	ld	(0x12, sp), a
                                    518 ;	Source/Device/Src/nixie.c: 186: tmp1=(tmp1>>1)|tmp2;
      00026D 9F               [ 1]  519 	ld	a, xl
      00026E 44               [ 1]  520 	srl	a
      00026F 1A 12            [ 1]  521 	or	a, (0x12, sp)
                                    522 ;	Source/Device/Src/nixie.c: 187: SPI_SendData(tmp1);
      000271 88               [ 1]  523 	push	a
      000272 CDr00r00         [ 4]  524 	call	_SPI_SendData
      000275 84               [ 1]  525 	pop	a
                                    526 ;	Source/Device/Src/nixie.c: 189: while(SPI_GetFlagStatus(SPI_FLAG_TXE)==RESET);
      000276                        527 00113$:
      000276 4B 02            [ 1]  528 	push	#0x02
      000278 CDr00r00         [ 4]  529 	call	_SPI_GetFlagStatus
      00027B 5B 01            [ 2]  530 	addw	sp, #1
      00027D 4D               [ 1]  531 	tnz	a
      00027E 27 F6            [ 1]  532 	jreq	00113$
                                    533 ;	Source/Device/Src/nixie.c: 191: tmp1=(uint8_t)(tube1>>5);
      000280 1E 0A            [ 2]  534 	ldw	x, (0x0a, sp)
      000282 A6 20            [ 1]  535 	ld	a, #0x20
      000284 62               [ 2]  536 	div	x, a
      000285 41               [ 1]  537 	exg	a, xl
      000286 6B 12            [ 1]  538 	ld	(0x12, sp), a
      000288 41               [ 1]  539 	exg	a, xl
                                    540 ;	Source/Device/Src/nixie.c: 192: tmp2=(uint8_t)(((tube1&0b10000)>>4)<<7);
      000289 16 0A            [ 2]  541 	ldw	y, (0x0a, sp)
      00028B 5F               [ 1]  542 	clrw	x
      00028C 90 9F            [ 1]  543 	ld	a, yl
      00028E A4 10            [ 1]  544 	and	a, #0x10
      000290 97               [ 1]  545 	ld	xl, a
      000291 A6 10            [ 1]  546 	ld	a, #0x10
      000293 62               [ 2]  547 	div	x, a
      000294 9F               [ 1]  548 	ld	a, xl
      000295 4E               [ 1]  549 	swap	a
      000296 A4 F0            [ 1]  550 	and	a, #0xf0
      000298 48               [ 1]  551 	sll	a
      000299 48               [ 1]  552 	sll	a
      00029A 48               [ 1]  553 	sll	a
                                    554 ;	Source/Device/Src/nixie.c: 193: tmp1=tmp1|tmp2;
      00029B 1A 12            [ 1]  555 	or	a, (0x12, sp)
                                    556 ;	Source/Device/Src/nixie.c: 194: SPI_SendData(tmp1);
      00029D 88               [ 1]  557 	push	a
      00029E CDr00r00         [ 4]  558 	call	_SPI_SendData
      0002A1 84               [ 1]  559 	pop	a
                                    560 ;	Source/Device/Src/nixie.c: 196: while(SPI_GetFlagStatus(SPI_FLAG_TXE)==RESET);
      0002A2                        561 00116$:
      0002A2 4B 02            [ 1]  562 	push	#0x02
      0002A4 CDr00r00         [ 4]  563 	call	_SPI_GetFlagStatus
      0002A7 5B 01            [ 2]  564 	addw	sp, #1
      0002A9 4D               [ 1]  565 	tnz	a
      0002AA 27 F6            [ 1]  566 	jreq	00116$
                                    567 ;	Source/Device/Src/nixie.c: 198: GPIO_WriteHigh(GPIOC,GPIO_PIN_7);//更新所有595输出
      0002AC 4B 80            [ 1]  568 	push	#0x80
      0002AE 4B 0A            [ 1]  569 	push	#0x0a
      0002B0 4B 50            [ 1]  570 	push	#0x50
      0002B2 CDr00r00         [ 4]  571 	call	_GPIO_WriteHigh
                                    572 ;	Source/Device/Src/nixie.c: 199: }
      0002B5 5B 15            [ 2]  573 	addw	sp, #21
      0002B7 81               [ 4]  574 	ret
                                    575 	.area CODE
                                    576 	.area CONST
                                    577 	.area INITIALIZER
      000000                        578 __xinit__tube_state:
      000000 00                     579 	.db #0x00	; 0
                                    580 	.area CABS (ABS)
